#
# an all rule always is the first rule in a file
# basically it should have as input the final file you want generated by 
# this porgram
#
rule all:
	input: "mean.txt",


#
# example shell rule
#
rule words_per_row:
	input:
		"words.txt"
	output:
		"count.txt",
	shell: "awk '{{print NF}}' {input} > {output}"

#
# example python run
#
rule mean_words_per_row:
	input:
		count = "count.txt",
	output:
		"mean.txt"
	run:
		lines = open(input["count"]).readlines()
		counts = [ int(line.strip()) for line in lines]
		result = sum(counts)/len(counts)
		out = "Mean words per row: {}\n".format(result)
		open(output[0], "w+").write(out)



#
# you can include rules that are not part of the dag and then run them using the rule name
# e.g. 
# snakemake get_SD
#
rule get_SD:
	input:	
		count = "count.txt",
	output:
		sd="sd.txt"
	run:
		# you can import and use all your favorite python libs
		import numpy as np
		lines = open(input["count"]).readlines()
		counts = [ int(line.strip()) for line in lines]
		result = np.std(counts)
		out = "SD of words per row: {}\n".format(result)
		open(output["sd"], "w+").write(out)





